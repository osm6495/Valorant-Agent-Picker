<!DOCTYPE html>
<html id="site">
    <head>
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Anton&family=Assistant&display=swap');
        </style> 
        <link rel="stylesheet" href="maps.css">
        <title>Valorant Agent Picker</title>
    </head>
    <body class="body">
        <div class="test">
            <a href="index.html" class="text agents">AGENTS</a>
            <a href="#" class="text maps">MAPS</a>
            <a href="teams.html" class="text teams">TEAMS</a>
        </div>  
        <div class="text-block" id="name">AGENT NAME</div>
        <script type="text/javascript">
            function inc(curr_index, images) {
                document.getElementById("site").style.backgroundImage = "url(" + images[curr_index] + ")";
                document.getElementById("name").textContent = images[curr_index].substr(17,).slice(0, -4).toUpperCase();
            }
            function spin(){
                var images = new Array();
                images[0] = "./Resources/Maps/ascent.jpg";
                images[1] = "./Resources/Maps/bind.jpg";
                images[2] = "./Resources/Maps/breeze.jpg";
                images[3] = "./Resources/Maps/fracture.jpg";
                images[4] = "./Resources/Maps/haven.jpg";
                images[5] = "./Resources/Maps/icebox.jpg";
                images[6] = "./Resources/Maps/pearl.jpg";
                images[7] = "./Resources/Maps/split.jpg";
                var rand_index = Math.floor(Math.random() * images.length);

                var operations = 16;
                var curr_index = 0;
                while (curr_index != rand_index){
                    //Loop to beginning of array
                    if(curr_index == 7){
                        curr_index = 0;
                        operations++;
                    } else {
                        curr_index++;
                        operations++;
                    }
                    
                }
                var frame;
                var time = 1; //miliseconds between operations
                var count = 0;

                frame = setInterval(frame, 100)
                function frame() {
                    setTimeout(function inner() {
                        if (count < operations) {
                            if(curr_index == 7) {
                                curr_index = 0;
                                inc(curr_index, images);
                            } else {
                                curr_index++;
                                inc(curr_index, images);
                            }
                            time = (time ** 2);
                            count++;
                        } else {
                            clearInterval(frame);
                        }
                    }, time);
                }
                
            }
            spin()
        </script>
        <a href="#" class="button w-button" type="button" onclick="spin()">SPIN</a>
    </body>
</html>
